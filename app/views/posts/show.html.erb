<%= link_to "Back", posts_path %>
<h1>Post Details</h1>
<div class="post-card">
  <%= @post.title %> <br>
  <%= @post.content %> <br>
  <%= @post.public %>
  <%= button_to "Delete", post_path(@post), method: :delete if can? :destroy, @post %>
  <% if PostLike.find_by(post: @post, user: current_user) %>
    <%= button_to "Unlike", unlike_path(@post.id), method: :delete %>
  <% else %>
    <%= button_to "Like", like_path(@post.id), method: :post %>
  <% end %>
  <%= form_with model: @comment, url: comment_path  do |f| %>
    <%= f.hidden_field :post_id, value: @post.id %>
    <%= f.label :content %>: 
    <%= f.text_area :content %> <br>
    <%= f.submit "Comment" %>
  <% end %>
  <% @comments.each do |comment|%>
    <div class="comment-card">
      <%= comment.user.username%>: 
      <%= comment.content %> <br>
      <%= link_to "Reply", post_comment_path(@post, comment)%>
      <% if CommentLike.find_by(comment: comment, user: current_user) %>
        <%= button_to "Unlike", unlike_comment_path(comment.id), method: :delete %>
      <% else %>
        <%= button_to "Like", like_comment_path(comment.id), method: :post %>
      <% end %>
      <%= button_to "Delete", post_comment_path(@post, comment), method: :delete if can? :destroy, comment %>
    </div>
  <% end %>
</div>
